<script>
    const entries = new dynamicVariable("entries", []);

    async function fetchEntries() {
        const response = await fetch("/api/v1/journal", {
            method: "GET",
            headers: {
                Authorization: `Bearer ${password}`,
            },
        });
        if (!response.ok) {
            console.error("Failed to fetch entries");
            return;
        }
        const data = await response.json();
        entries.set(data);
    }

    fetchEntries();
</script>

<each-element
    update="entries"
    js="entries.value"
    element="entry"
    class="w-full flex flex-col">
    <a data-update="entries" data-dynamic-href="`/journal/${entry.id}`">
        <js-element update="entries" js="entry.content">
            Entry
        </js-element>
    </a>
</each-element>

<style>
    body {
        background-color: black;
        color: white;
    }
</style>
